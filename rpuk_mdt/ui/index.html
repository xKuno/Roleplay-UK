<!DOCTYPE html>
<html lang="en" style="overflow-y: hidden;">

<head>
	<meta charset="utf-8">
	<title>rpuk_mdt</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.2/css/all.css">
	<link rel="stylesheet" type="text/css" href="main.css">
	<link v-if="officer.department === 'police'" rel="stylesheet" type="text/css" href="styles/police.css">
	<link v-if="officer.department === 'nca'" rel="stylesheet" type="text/css" href="styles/nca.css">
	<link v-if="officer.department === 'court'" rel="stylesheet" type="text/css" href="styles/court.css">
	<style>
		@import url('https://fonts.googleapis.com/css2?family=Lato&display=swap');
		body {
			display: none;
			user-select: none;
		}
	</style>
</head>

<body>
	<div id="container">
		<img src="img/ipad.png" id="ipad">
		<div v-bind:class="getClass('content')">
			<div v-bind:class="getClass('line')" style="top: 10%;"></div>
			<img v-if="officer.department == 'police'" src="img/police.png" v-bind:class="getClass('badge')">
			<img id ='nca_logo' v-if="officer.department == 'nca'" src="img/nca.png" v-bind:class="getClass('badge')">
			<img v-if="officer.department == 'court'" src="img/court.png" v-bind:class="getClass('badge')">
			<p id="policeTitle" v-if="officer.department == 'police'">Los Santos Police Service</p>
			<p id="policeWelcome">Welcome, {{ officer.departmentLevelLabel }} {{ officer.name }}.</p>

			<p id="ncaWelcome"   v-if="officer.department == 'nca'"  >National Crime Agency</p>
			<!-- <p id="ncaWelcome"   v-if="officer.department == 'nca'"  >Welcome, {{ officer.departmentLevelLabel }} {{ officer.name }}.</p> -->

			<p id="courtTitle"   v-if="officer.department == 'court'">Welcome, {{ officer.departmentLevelLabel }} {{ officer.name }}.</p>
			<p id="courtWelcome" v-if="officer.department == 'court'">Los Santos Ministry Of Justice</p>

			<p style="position: fixed; left: 17%; top: 5.5%; color: white;">Welcome, {{ officer.departmentLevelLabel }} {{ officer.name }}.</p>

			<button id="billingBtn" type="button" v-if="(officer.department === 'police' || officer.department === 'court' && officer.departmentLevel >= 2)" v-on:click="openBillingUI()">TICKETS</button>
			<button id="whitelistBtn" type="button" v-if="(officer.department === 'police' && officer.departmentLevel >= 5 || officer.department === 'nca' && officer.departmentLevel >= 4 || officer.department === 'court' && officer.departmentLevel >= 3)" v-on:click="openWhitelist()">WHITELIST</button>
			<button id="logoutBtn" type="button" v-on:click="closeMDT()">LOGOUT</button>

			<div id="navBar">
				<ul>
					<li v-if="officer.department === 'police' || officer.department === 'nca' || (officer.department === 'court' && officer.departmentLevel >= 2)" class="navItem" v-on:click="RefreshHome(); changePage('Home')" id="home">Home</li>
					<li v-if="officer.department === 'police' || officer.department === 'nca' || (officer.department === 'court' && officer.departmentLevel >= 2)" class="navItem" v-on:click="changePage('Search Offenders')" id="search-offenders">Search Persons</li>
					<li class="navItem" v-if="officer.department === 'police' || officer.department === 'nca'" v-on:click="changePage('Search Vehicles')" id="search-vehicles">Search Vehicles</li>
					<li v-if="officer.department === 'police' || officer.department === 'nca' || (officer.department === 'court' && officer.departmentLevel >= 2)" class="navItem" v-on:click="changePage('Search Reports')" id="search-reports">Search Incident Reports</li>
					<li class="navItem" v-if="officer.department === 'police' || officer.department === 'nca'"v-on:click="changePage('Submit Report')" id="submit-report">Create Incident Report</li>
					<!--  <li class="navItem" v-on:click="changePage('Calls')" id="calls" >Calls</li> -->
					<li v-if="officer.department === 'police' || officer.department === 'nca' || (officer.department === 'court' && officer.departmentLevel >= 2)" class="navItem" v-on:click="changePage('Warrants')" id="warrants">Arrest Warrants</li>
					<li class="navItem" v-if="officer.department === 'police' && officer.departmentLevel >= 5" v-on:click="changePage('Police Hours')" id="pol_hours">Patrol Hours</li>
					<!-- <li class="navItem" v-if="officer.department === 'court' && officer.departmentLevel === 1" v-on:click="changePage('Public Reports')" id="pub_reports">Public Reports</li> -->
				</ul>
			</div>

			<main id="main">
				<div v-if="page == 'Home' && !(officer.department === 'court' && officer.departmentLevel === 1)">
					<h2 class="page-title"></h2>
					<div class="left-side" style="width: 400px; position: absolute; float: unset;">
						<h3>RECENT REPORTS</h3>
						<br>
						<h4 v-if="homepage.reports == false"> ... </h4>
						<span v-if="homepage.reports" v-for="result in homepage.reports">
							<h4 style="font-size: 12px; margin-bottom: 3px;"> {{ new Date(result.date).toLocaleString('en-GB', {timeZone: 'Europe/London'}) }} - ID: {{ result.id }} - {{result.name}}
							</h4>
							<button type="button" v-on:click="report_selected = result; changePage('Search Reports');"
								style="margin-bottom: 10px; width: 100%; padding: unset;"> {{ result.title }} </button>
							<br>
						</span>
					</div>

					<div class="left-side" style="width: 400px; position: absolute; top: 55%;">
						<h3>PERSON SEARCHES</h3>
						<br>
						<h4 v-if="recent_searches.person.length == 0"> ... </h4>
						<span v-else-if="recent_searches.person.length > 0" v-for="person in recent_searches.person">
							<button type="button" v-on:click="OpenOffenderDetailsById(person.id);"style="margin-bottom: 10px; width: 100%; padding: unset;">
								{{ person.firstname }} {{person.lastname}} </button>
							<br>
						</span>
					</div>

					<div class="right-side" style="width: 400px; position: absolute; float: unset;">
						<h3>RECENT WARRANTS</h3>
						<br>
						<h4 v-if="homepage.warrants == false"> ... </h4>
						<span v-else-if="homepage.warrants != false" v-for="warrant in homepage.warrants">
							<h4 style="font-size: 12px; margin-bottom: 3px;"> {{ new Date(warrant.date).toLocaleString('en-GB', {timeZone: 'Europe/London'}) }} - ID: {{ warrant.id }}
							</h4>
							<button type="button" v-on:click="warrant_selected = warrant; changePage('Warrant Details');"
								style="margin-bottom: 10px; width: 100%; padding: unset;"> {{ warrant.name }} </button>
							<br>
						</span>
					</div>

					<div v-if="officer.department === 'police' || officer.department === 'nca'" class="right-side"
						style="width: 400px; position: absolute; top: 55%;">
						<h3>VEHICLE SEARCHES</h3>
						<br>
						<h4 v-if="recent_searches.vehicle.length == 0"> ... </h4>
						<span v-else-if="recent_searches.vehicle.length > 0" v-for="vehicle in recent_searches.vehicle">
							<button type="button" v-on:click="OpenVehicleDetails(vehicle);" style="margin-bottom: 10px; width: 100%; padding: unset;"> {{ vehicle.plate }} </button>
							<br>
						</span>
					</div>
				</div>

				<div v-if="page == 'Search Reports'">
					<h2 class="page-title">SEARCH DATABASE</h2>
					<form v-on:submit.prevent = "ReportSearch()">
						<input v-model="report_search" type="text" placeholder="Name or Report ID" required >
						<button type="submit">SEARCH</button>
					</form>
					<br>
					<div class="left-side" style="width: 500px;">
						<button v-if="report_selected.date" type="button" v-on:click="changePage('Report Details')"
							id="report-details">VIEW REPORT</button>
							<button v-if="report_selected.date && !report_selected.actioned && ((officer.department === 'police' && officer.departmentLevel >=1) || (officer.department ==='nca' && officer.departmentLevel>=1))" type="button" v-on:click="ActionReport(report_selected.id, report_selected.charges, report_selected.char_id); RefreshHome(); changePage('Home')"
							id="report-details">CONVICT</button>
						<button v-if="report_selected.date" type="button"
							v-on:click="changePage('Submit Report'); report_new.recommended_fine = report_selected.fine; report_new.recommended_sentence = report_selected.duration; report_new.charges = report_selected.charges; report_new.title = report_selected.title; report_new.incident = report_selected.incident; report_new.recommended_fine = report_selected.fine; report_new.recommended_sentence = report_selected.duration"
							id="report-details">COPY REPORT</button>
						<button v-if="(officer.department === 'police' && officer.departmentLevel >=1) || (officer.department ==='nca' && officer.departmentLevel>=1)" v-if="report_selected.date" type="button"
							v-on:click="changePage('Submit Warrant'); warrant_new.report_id = report_selected.id; warrant_new.char_id = report_selected.char_id; warrant_new.report_title = report_selected.title; warrant_new.name = report_selected.name; warrant_new.charges = report_selected.charges; warrant_new.fine = report_selected.fine; warrant_new.duration = report_selected.duration;">
							NEW WARRANT</button>
						<button type="button" v-if="officer.department === 'police' || officer.department === 'nca'" style="margin-top: 5px;" v-on:click="changePage('Submit Report')">NEW REPORT</button>
						<br/><br/>
						<template v-if="report_selected.public"><h3>Report is publicly viewable by solicitors</h3><br/></template>
						<h3>DATE</h3>
						<h4 v-if="report_selected.date"> {{ new Date(report_selected.date).toLocaleString('en-GB', {timeZone: 'Europe/London'}) }} </h4>
						<h4 v-else-if="report_selected.date == null"> ... </h4>
						<br/>
						<h3>NAME</h3>
						<h4 v-if="report_selected.name" v-on:click="OpenOffenderDetailsById(report_selected.char_id);"
							v-bind:class="getClass('clickable')" v-on:click="modal = null"> {{ report_selected.name }}
						</h4>
						<h4 v-else-if="report_selected.name == null"> ... </h4>
						<br/>
						<h3>REPORT ID #{{ report_selected.id}}</h3>
						<h4 v-if="report_selected.title"> {{ report_selected.title }} </h4>
						<h4 v-else-if="report_selected.title == null"> ... </h4>
						<br/>
						<h3>CHARGES</h3>
						<h4 v-if="!report_selected.charges || !Object.entries(report_selected.charges).length"> ... </h4>
						<span v-if="report_selected.charges">
							<span v-for="[id, count] in Object.entries(report_selected.charges)" :key="id">
								<h4>
									({{count}}x) {{ offense_finder[id.toString()].label }} 
								</h4>
							</span>
						</span>
						<br/>
						<h3>MAXIMUM FINE</h3>
						<h4>  {{  formatMoney(report_selected.fine) }} </h4>
						<br/>
						<h3>MAXIMUM SENTENCE</h3>
						<h4 v-if="report_selected.duration"> {{ report_selected.duration <= 720 ? report_selected.duration : 720 }} Months </h4>
						<h4 v-else-if="!report_selected.duration"> No sentence recommended.</h4>
						<h4 v-else>... </h4>
						<br/>
						<h3 >MAXIMUM LICENCE POINTS</h3>
						<h4 v-if="!jQuery.isEmptyObject(report_selected.licence_points)" v-for="(points, licence) in report_selected.licence_points">
							{{ all_licences[licence].label }} - {{ points <= 20 ? points : 20 }} points
						</h4>
						<h4 v-else> No recommended licence point actions. </h4>
						<br/>
						<h3>OFFICER</h3>
						<h4 v-if="report_selected.author"> {{ report_selected.author }} </h4>
						<h4 v-else-if="report_selected.author == null"> ... </h4>
						<br>
						<span v-if="report_selected.date && report_selected.actioned"><h3 >Offender has been convicted.</h3><br/></span>
					</div>
					<div class="right-side" style="max-height: 435px;">
						<div v-if="report_results.results" style="margin-right: 10px;">
							<h3>SEARCH RESULTS</h3>
							<h4 style="margin: 10px 1px 30px 1px;">Finding results for '{{ report_results.query }}'...</h4>
							<span v-if="report_results.results" v-for="result in report_results.results">
								<h4 style="font-size: 12px; margin-bottom: 3px;"> {{ new Date(result.date).toLocaleString('en-GB', {timeZone: 'Europe/London'}) }} - ID: {{ result.id }} - {{result.name}} </h4>
								<button type="button" v-on:click="report_selected = result; report_selected.charges = result.charges" style="margin-bottom: 10px; width: 100%; padding: unset;"> {{ result.title }}
								</button>
								<br>
							</span>
						</div>
					</div>
				</div>

				<div v-if="page == 'Public Reports' && officer.department === 'court' && officer.departmentLevel === 1 " >
					<h2 class="page-title">Public Reports</h2>
					<br/>
					<button type="button" v-on:click="PublicReportSearch(); changePage('Public Reports')">Refresh</button>
					<br>
					<div class="left-side" style=" width: 500px;">
						<h3>DATE</h3>
						<h4 v-if="report_selected.date"> {{ new Date(report_selected.date).toLocaleString('en-GB', {timeZone: 'Europe/London'}) }} </h4>
						<h4 v-else-if="report_selected.date == null"> ... </h4>
						<br/>
						<h3>NAME</h3>
						<h4 v-if="report_selected.name"> {{ report_selected.name }}
						</h4>
						<h4 v-else-if="report_selected.name == null"> ... </h4>
						<br/>
						<h3>REPORT ID #{{ report_selected.id}}</h3>
						<h4 v-if="report_selected.title"> {{ report_selected.title }} </h4>
						<h4 v-else-if="report_selected.title == null"> ... </h4>
						<br/>
						<h3>CHARGES</h3>
						<h4 v-if="!report_selected.charges || !Object.entries(report_selected.charges).length"> ... </h4>
						<span v-if="report_selected.charges">
							<span v-for="[id, count] in Object.entries(report_selected.charges)" :key="id">
								<h4>
									({{count}}x) {{ offense_finder[id.toString()].label }} 
								</h4>
							</span>
						</span>
						<br/>
						<!-- <h3>MAXIMUM FINE</h3>
						<h4>  {{  formatMoney(report_selected.fine) }} </h4>
						<br/>
						<h3>MAXIMUM SENTENCE</h3>
						<h4 v-if="report_selected.duration"> {{ report_selected.duration <= 720 ? report_selected.duration : 720 }} Months </h4>
						<h4 v-else-if="!report_selected.duration"> No sentence recommended.</h4>
						<h4 v-else>... </h4>
						<br/> -->
						<h3>OFFICER</h3>
						<h4 v-if="report_selected.author"> {{ report_selected.author }} </h4>
						<h4 v-else-if="report_selected.author == null"> ... </h4>
						<br>
						<span v-if="report_selected.date && report_selected.actioned"><h3 >Offender has been convicted.</h3><br/></span>
						<button v-if="report_selected.date" type="button" v-on:click="changePage('Report Details')"
							id="report-details">VIEW REPORT</button>
					</div>
					<div class="right-side" style="max-height: 435px;">
						<div style="margin-right: 10px;">
							
							<span v-if="public_reports && public_reports.length" v-for="result in public_reports">
								<h4 style="font-size: 12px; margin-bottom: 3px;"> {{ new Date(result.date).toLocaleString('en-GB', {timeZone: 'Europe/London'}) }} - ID: {{ result.id }} - {{result.name}} </h4>
								<button type="button" v-on:click="report_selected = result; report_selected.charges = result.charges" style="margin-bottom: 10px; width: 100%; padding: unset;">
									{{ result.title }}
								</button>
								<br>
							</span>
							<h4 v-else> No Public Reports...</h4>

						</div>
					</div>
				</div>

				<div v-if="page == 'Submit Report'">
					<h2 class="page-title">NEW REPORT</h2>
					<div class="left-side" style="position:absolute; top: 20%;">
						<form v-on:submit.prevent = "SubmitNewReport()">
							<h3>NAME</h3>
							<h4 v-if="report_new.name" style="font-size: 14px;"> {{ report_new.name }} </h4>
							<h4 v-else-if="report_new.name == null"> ... </h4>
							<br/>
							<h3>INCIDENT</h3>
							<input v-model="report_new.title" style="font-size: 14px;" type="text" placeholder="Enter report title" class="report-input" required>
							<br/>
							<br/>
							<h3>DETAILS</h3>
							<textarea style="white-space: pre-wrap" v-model="report_new.incident" :class="getClass('textarea')" rows="6" cols="55" placeholder="Enter report description"
							onkeypress='this.style.height = "";this.style.height = this.scrollHeight + "px"' required> </textarea>
							<h3>CHARGES</h3>
							<h4 v-if="report_new.charges && !Object.entries(report_new.charges).length"> ... </h4>
							<span v-for="[id, count] in Object.entries(report_new.charges)" :key="id">
								<h4 style="font-size: 14px;">
									<span v-on:click="RemoveCharge(id)" class="remove">(-)</span>
									({{count}}x) {{ offense_finder[id.toString()].label }} 
								</h4>
							</span>
							<br/>
							<h4 v-if="report_new.recommended_fine > 0">MAXIMUM Fine Amount:  {{ formatMoney(report_new.recommended_fine)}}</h4>
							<h4 v-if="report_new.recommended_sentence > 0">MAXIMUM Prison Sentence: {{report_new.recommended_sentence < 720 ? report_new.recommended_sentence : 720}} Months</h4>
							<h4 v-if="!jQuery.isEmptyObject(report_new.recommended_points)">MAXIMUM LICENCE Points:</h4>
							<h4 v-if="!jQuery.isEmptyObject(report_new.recommended_points)" v-for="(points, licence) in report_new.recommended_points">
								{{ all_licences[licence].label }} - {{ points <= 20 ? points : 20 }} points
							</h4>
							<br>
							<button v-if="report_new.char_id && report_new.incident && report_new.title" type="submit" style="margin-top: 20px">SUBMIT REPORT</button>
							<button v-if="report_new.focus == 'charges'" v-on:click="report_new.focus = 'name'" type="button" style="margin-top: 20px">SEARCH OFFENDER</button>
							<button v-if="report_new.focus == 'name'" v-on:click="report_new.focus = 'charges'" type="button" style="margin-top: 20px">SEARCH CHARGES</button>
						</form>
					</div>

					<div class="right-side" style="position: absolute; top: 15%;">
						<div v-if="report_new.focus == 'name'">
							<h3 style="margin: 10px 0px">SEARCH OFFENDER</h3>
							<form v-on:submit.prevent = "OffenderSearch()">
								<input v-model="offender_search" type="text" placeholder="Full Name or Citizen ID" required>
								<button type="submit">SEARCH</button>
							</form>
							<div v-if="offender_results.query" style="max-height: 380px; margin-right: 10px;">
								<h3>SEARCH RESULTS</h3>
								<h4 style="margin: 10px 1px 30px 1px;">Finding results for '{{ offender_results.query }}'...</h4>
								<span v-if="offender_results.results" v-for="offender in offender_results.results">
									<button type="button" v-on:click="report_new.char_id = offender.id; report_new.name = offender.firstname + ' ' + offender.lastname; report_new.focus='charges'; report_new.charges = {...report_new.charges}; "
										style="margin-bottom: 10px; width: 100%; padding: unset;">{{ offender.firstname }} {{ offender.lastname }}</button>
									<br>
								</span>
							</div>
						</div>

						<div v-else-if="report_new.focus == 'charges'">
							<h3 style="margin: 10px 0px">SEARCH CHARGES</h3>
							<div v-if="offenses" style="max-height: 440px; margin-right: 10px;">
								<input v-model="report_new.charges_search" type="text" placeholder="Filter charges" style="width: 80%;" required>
								<span v-for="offense in filtered_offenses">
									<button type="button" v-on:click="AddCharge(offense)" style="margin-bottom: 10px; width: 100%; padding: unset;">{{ offense.label }}</button>
									<br>
								</span>
							</div>
							<h4 v-else-if="offenses == false">Loading charges...</h4>
						</div>
					</div>
				</div>

				<div v-if="page == 'Search Offenders'">
					<h2 class="page-title">SEARCH DATABASE</h2>
					<form v-on:submit.prevent = "OffenderSearch()">
						<input v-model="offender_search" type="text" placeholder="Full Name or Citizen ID" required>
						<button type="submit">SEARCH</button>
					</form>
					<br>
					<div class="left-side" style=" min-width: 550px;">
						<button v-if="offender_selected.firstname" type="button" v-on:click="modal = 'edit_offender'" id="edit-offender">EDIT PROFILE</button>
						<button v-if="Object.keys(offender_selected.vehicles).length > 0" type="button" v-on:click="modal = 'vehiclelist'">VEHICLES</button>
						<button v-if='offender_selected.firstname' type="button" v-on:click="modal = 'sentences'">SENTENCES</button>
						<button v-if='offender_selected.firstname' type="button" v-on:click="report_search = offender_selected.firstname + ' ' + offender_selected.lastname; changePage('Search Reports'); ReportSearch()">REPORTS</button>
						<button v-if="(officer.department === 'police' || officer.department === 'nca') && offender_selected.firstname" type="button"
							v-on:click="changePage('Submit Report'); report_new.char_id = offender_selected.id; report_new.name = offender_selected.firstname + ' ' + offender_selected.lastname; report_new.focus = 'charges'">
							NEW REPORT
						</button>
						<br/>
						<br/>
						<h3>NAME</h3>
						<h4 v-if="offender_selected.firstname"> {{ offender_selected.firstname }} {{ offender_selected.lastname }} </h4>
						<h4 v-else-if="offender_selected.name == null"> ... </h4>
						<br/>
						<h3 v-if="offender_selected.firstname == null || offender_selected.notes ">NOTES</h3>
						<h4 v-if="offender_selected.notes" style="white-space: pre-wrap;"> {{ offender_selected.notes }} </h4>
						<br v-if="offender_selected.firstname == null || offender_selected.notes" />
						<h3> MARKERS</h3>
						<span v-if="offender_selected.mdt_markers" v-for="(value, key) in offender_selected.mdt_markers" :key='key'>
							<button v-if="value===1" style="margin-right:5px; background-color: #ff4747; border: 4px solid #ff4747;">{{ key }}</button>
						</span>
						<br/>
						<button v-if="offender_selected.firstname" type="button" 
							v-on:click="modal = 'edit_offender_markers'; marker_changes.mdt_markers = {...offender_selected.mdt_markers};"
							style="margin: 15px 0;">EDIT MARKERS</button>
						<h3 v-if="offender_selected.haswarrant">STATUS</h3>
						<h4 v-if="offender_selected.haswarrant" v-bind:class="getClass('important')" style="color: #ff4747">{{ offender_selected.firstname}} {{offender_selected.lastname}} has an active warrant. </h4>
						<!-- <h4 v-if="offender_selected.bail" v-bind:clas="getClass('important')">{{ offender_selected.firstname}} {{offender_selected.lastname}} is on bail. </h4> -->
						<br v-if="offender_selected.haswarrant"/>
						<h3 v-if="offender_selected.unpaidFines && offender_selected.unpaidFines.length">Unpaid Tickets</h3>
						<span v-if="offender_selected.unpaidFines" v-for="fine in offender_selected.unpaidFines" :key='fine.id'>
							<h4>
								<span v-if="fine.overdue" style="color: #ff4747">{{ new Date(fine.date_created).toLocaleDateString('en-GB', {timezone: 'Europe/London'}) }}  </span>
								<span v-if="!fine.overdue" style="color: #ffbf00">{{ new Date(fine.date_created).toLocaleDateString('en-GB', {timezone: 'Europe/London'}) }}  </span>  
								| <span>{{formatMoney(fine.amount) }}</span>  |  
								{{ fine.reason }}</h4>
						</span>
						<br v-if="offender_selected.unpaidFines && offender_selected.unpaidFines.length"/>
						
						<h3 style="display:none;">PHONE NUMBER</h3>
						<h4 v-if="offender_selected.phone_number" style="display:none;"> {{offender_selected.phone_number}} </h4>
						<h4 v-else-if="offender_selected.phone_number == null" style="display:none;"> ... </h4>
						
						<br/>
						<h3>OCCUPATION</h3>
						<template v-if="offender_selected.occupation">
							<h4 v-if='offender_selected.occupation !== "National Crime Agency"'> {{offender_selected.occupation}} </h4>
							<h4 v-else> Unemployed </h4>
						</template>
						<template v-else-if="offender_selected.occupation == null">
							<h4 > ... </h4>
						</template>
						<br/>
						<h3 v-if="offender_selected.firstname == null || offender_selected.licences">LICENCES</h3>
						<h4 v-if="offender_selected.firstname == null"> ... </h4>
						<span v-else-if="offender_selected.licences" v-for="licence in offender_selected.licences">
							<h4>{{ licence.label }} | {{ licence.points }} points<span v-if="licence.banned"> | [BANNED]</span></h4>
						</span>
						<br v-if="offender_selected.licences"/>
						<h3>AGE</h3>
						<h4 v-if="offender_selected.dateofbirth"> {{ offender_selected.dateofbirth }} </h4>
						<h4 v-else-if="offender_selected.dateofbirth == null"> ... </h4>
						<br/>
						<h3 v-if="offender_selected.firstname == null || (offender_selected.convictions != null && Object.keys(offender_selected.convictions).length > 0)">CONVICTIONS</h3>
						<h4 v-if="offender_selected.firstname == null"> ... </h4>
						<span v-else-if="offender_selected.convictions" v-for="(value, name) in offender_selected.convictions">
							<h4>({{ value }}x) {{ offense_finder[name.toString()].label }} </h4>
						</span>
						<br>
						
					</div>

					<div class="right-side" style="max-height: 435px;">
						<div v-if="offender_results.query" style="margin-right: 10px;">
							<h3>SEARCH RESULTS</h3>
							<h4 style="margin: 10px 1px 30px 1px;">Finding results for '{{ offender_results.query }}'...</h4>
							<span v-if="offender_results.results" v-for="offender in offender_results.results">
								<button type="button" v-on:click="OpenOffenderDetails(offender.id)" style="margin-bottom: 10px; width: 100%; padding: unset;">
									{{ offender.firstname }} {{ offender.lastname }}</button>
								<br>
							</span>
						</div>

						<div v-else-if="offender_results.results == false">
							<!-- <span v-if="offender_selected.bail" v-bind:class="getClass('img-block')">BAIL</span> -->
							<button v-if="offender_selected.haswarrant" v-bind:class="getClass('img-block')" v-on:click="changePage('Warrants')" class='clickable'>ACTIVE WARRANT</button>
							<img v-if="offender_selected.mugshot_url" v-bind:src="offender_selected.mugshot_url" alt="mugshot" v-bind:class="getClass('mugshot')">
							<img v-else-if="offender_selected.mugshot_url == ''" src="img\mugshot.png" alt="mugshot" v-bind:class="getClass('mugshot')">
						</div>
					</div>

					
					<div class="modal" v-if="modal == 'vehiclelist'">
						<div v-bind:class="getClass('modal-content')" style="width: 50%; padding: 15px; margin-top: 120px;">
							<span v-bind:class="getClass('close')" v-on:click="modal = null">
								<i class="fas fa-times"></i>
							</span>
							<h3 style="text-align: left; margin: 0; padding: 0; margin-bottom: 15px;">VEHICLES</h3>
							<div style="max-height: 68%; overflow-y: auto; margin-right: 10px;">
								<table style="width: 95%;">
									<tr>
										<th>Plate</th>
										<th>Model</th>
										<th>Color</th>
									</tr>
									<tr v-for="vehicle in offender_selected.vehicles"
										v-on:click="OpenVehicleDetails(vehicle)">
										<td>{{vehicle.plate}}</td>
										<td>{{vehicle.model}}</td>
										<td>{{vehicle.color}}</td>
									</tr>
								</table>
							</div>
						</div>
					</div>
					<div class="modal" v-if="modal == 'sentences'">
						<div v-bind:class="getClass('modal-content')" style="width: 50%; padding: 15px; margin-top: 120px;">
							<span v-bind:class="getClass('close')" v-on:click="modal = null">
								<i class="fas fa-times"></i>
							</span>
							<h3 style="text-align: left; margin: 0; padding: 0; margin-bottom: 15px;">Prison Sentences</h3>
							<div style="max-height: 68%; overflow-y: auto; margin-right: 10px;">
								<table style="width: 95%;">
									<tr>
										<th>Imprisonment Date</th>
										<th>Arresting Officer</th>
										<th>Release Date</th>
										<th>Reason</th>
									</tr>
									<tr v-for="sentence in offender_selected.sentences">
										<td>{{ new Date(sentence.imprison_time).toLocaleDateString('en-GB', { timezone: 'Europe/London' }) }}</td>
										<td>{{ sentence.arresting_officer ? sentence.arresting_officer : 'Unknown' }}</td>
										<td>{{ new Date(sentence.release_time).toLocaleDateString('en-GB', { timezone: 'Europe/London' }) }}</td>
										<td>{{ sentence.reason }}</td>
									</tr>
								</table>
							</div>
						</div>
					</div>

					<div class="modal" v-if="modal == 'edit_offender_markers'">
						<div v-bind:class="getClass('modal-content')"
							style="width: 50%; padding: 15px; margin-top: 120px; text-align: left;">
							<span v-bind:class="getClass('close')" v-on:click="modal = null"><i class="fas fa-times"></i></span>
							<h3 style="text-align: left; margin: 0; padding: 0; margin-bottom: 15px;">EDIT MARKERS</h3>
							<div style="margin-right: 5px; max-height: 65%; overflow-y: auto;">
								<h3>Markers</h3>
								<p><span style="font-size: 0.7em;">red=off // green=on</span></p>
								<br/>
								<span v-if="marker_changes.mdt_markers" v-for="(value, key) in marker_changes.mdt_markers" :key='key'>
									<button v-if="value===1" class="clickable" 
									v-on:click="Vue.set(marker_changes.mdt_markers, key, 0)" style='
									background-color: #43b581;
									color: #23272a;
									font-family: "Lato";
									font-weight: bolder;
									border: 4px solid #43b581;
									font-size: 12pt;
									text-align: center;
									padding: 4px 3px;
									margin-right: 5px;
								'>{{ key }} </button>
									<button v-else class="clickable" 
									v-on:click="Vue.set(marker_changes.mdt_markers, key, 1)" style='
										background-color: #ff4747;
										color: #fff;
										font-family: "Lato";
										font-weight: bolder;
										border: 4px solid #ff4747;
										font-size: 12pt;
										text-align: center;
										padding: 4px 3px;
										margin-right: 5px;
										margin-bottom: 5px;
									'
									>{{ key }} </button>
								</span>
								<br>
								<br>
								<button type="button" v-if='JSON.stringify(offender_selected.mdt_markers) !== JSON.stringify(marker_changes.mdt_markers)' v-on:click="SaveOffenderMarkers()">SAVE</button>
							</div>
						</div>
					</div>

					<div class="modal" v-if="modal == 'edit_offender'">
						<div v-bind:class="getClass('modal-content')" style="width: 50%; padding: 15px; margin-top: 120px; height: auto; text-align: left;">
							<span v-bind:class="getClass('close')" v-on:click="modal = null">
								<i class="fas fa-times"></i>
							</span>
							<h3 style="text-align: left; margin: 0; padding: 0; margin-bottom: 15px;">EDIT DETAILS</h3>
							<br>
							<div style="max-height: 55%; overflow-y: auto;">
								<h3>NOTES</h3>
								<textarea style="white-space: pre-wrap" rows=4 v-model="offender_changes.notes" :class="getClass('textarea')" onfocus='this.style.height = "";this.style.height = this.scrollHeight + "px"'
								onkeypress='this.style.height = "";this.style.height = this.scrollHeight + "px"' placeholder="Enter Offender Notes"></textarea>
								<h3 style="margin-top: 20px">MUGSHOT URL</h3>
								<input v-model="offender_changes.mugshot_url" type="text" v-bind:placeholder="offender_selected.mugshot_url">
								<br>
								<button v-if="offender_changes.bail == true" type="button" style="margin: 10px 0;" v-on:click="offender_changes.bail = false">ON BAIL</button>
								<!-- <button v-else-if="offender_changes.bail == false" type="button" style="margin: 10px 0;" v-on:click="offender_changes.bail = true">NOT ON BAIL</button> -->
								<h3 style="margin-top: 20px">LICENCES</h3>
								<h4 v-if="offender_changes.licences == false"> ... </h4>
								<span v-else-if="offender_changes.licences" v-for="licence in offender_changes.licences">
									<h4>
										{{ licence.label }}
										 | Points:
										<input
											type="number"
											max="20"
											min="0"
											v-model="licence.points"
											:readonly="licence.banned"
											style="display: inline-block; width: 35px; margin-left: 5px; margin-right: 0; padding: 0 2px; text-align: center;"
											@change="(licence.points > 20) ? licence.points = 20 : ''; (licence.points < 0) ? licence.points = 0 : ''"
										>
										 | Banned:
										<input type="checkbox" v-model="licence.banned" :onclick="officer.department === 'court' ? '' : 'return false'">
									</h4>
								</span>
								<br>
								<h3>CONVICTIONS</h3>
								<h4 v-if="offender_changes.convictions == null || (offender_changes.convictions && Object.keys(offender_changes.convictions).length == 0)"> ... </h4>
								<span v-else-if="offender_changes.convictions" v-for="(value, name) in offender_changes.convictions">
									<h4>
										<!-- (officer.department === 'police' && officer.departmentLevel >= 5) || (officer.department ==='nca' && officer.departmentLevel >=2) -->
										<span v-if="officer.department === 'court'"
											v-on:click="RemoveConviction(name)" class="remove">(-)</span>
											({{ value }}x) {{ offense_finder[name.toString()].label }} 
									</h4>
								</span>
								<br>
							</div>
							<button type="button" v-on:click="SaveOffenderChanges()" style="margin-top: 10px;">SAVE CHANGES</button>
						</div>
					</div>
				</div>

				<div v-if="page == 'Report Details'">
					<h2 class="page-title">REPORT DETAILS</h2>
					<br>
					
					<div class="left-side" style="width: 50%; max-width: 1000px; float: left; margin: 0 auto; position: absolute; top: 15%;">
						<button v-if='!(officer.department === "court" && officer.departmentLevel === 1)' type="button" v-on:click="changePage('Search Reports')" id="search-reports">BACK TO REPORTS</button>
						<button v-if='officer.department === "court" && officer.departmentLevel === 1' type="button" v-on:click="changePage('Public Reports')" id="public-reports">BACK TO PUBLIC REPORTS</button>
						<button v-if='report_edit.enable == false && !(officer.department === "court" && officer.departmentLevel === 1)' type="button" v-on:click="ToggleReportEdit()">EDIT</button>
						<button v-if="report_edit.enable == false && ((officer.department === 'police' && officer.departmentLevel >= 5) || (officer.department ==='nca' && officer.departmentLevel >=4))" type="button" v-on:click="DeleteSelectedReport()">DELETE</button>
						<template v-else-if="report_edit.enable">
							<button type="button" v-if="report_edit.data.incident && report_edit.data.title" v-on:click="SaveReportEditChanges();">SAVE</button>
							<button type="button" v-on:click="ToggleReportEdit();">CANCEL</button>
						</template>
						<template v-if="(officer.department === 'police' && officer.departmentLevel >= 2) || (officer.department === 'nca' && officer.departmentLevel >= 2) || (officer.department === 'court' && officer.departmentLevel >= 2)">
							<button v-if="report_selected.public" type="button" v-on:click="SetReportPublicStatus(report_selected.id, !report_selected.public); changePage('Search Reports')">MAKE REPORT PRIVATE</button>
							<button v-else type="button" v-on:click="SetReportPublicStatus(report_selected.id, !report_selected.public); changePage('Search Reports')">MAKE REPORT PUBLIC</button>
						</template>
						<br/><br/>
						<template v-if="report_selected.public"><h3>Report is publicly viewable by solicitors</h3><br/></template>
						<h3>DATE</h3>
						<h4 v-if="report_selected.date"> {{ new Date(report_selected.date).toLocaleString('en-GB', {timeZone: 'Europe/London'}) }} </h4>
						<h4 v-else-if="report_selected.date == null"> ... </h4>
						<br/>
						<h3>NAME</h3>
						<h4 v-if="report_selected.name && officer.department === 'court' && officer.departmentLevel === 1 " > {{ report_selected.name }} </h4>
						<h4 v-if="report_selected.name && !(officer.department === 'court' && officer.departmentLevel === 1)" v-on:click="OpenOffenderDetailsById(report_selected.char_id)" v-bind:class="getClass('clickable')"> {{ report_selected.name }} </h4>
						<h4 v-else-if="report_selected.name == null"> ... </h4>
						<br/>
						<template v-if="report_edit.enable == false">
							<h3>INCIDENT #{{report_selected.id}}</h3>
							<h4 v-if="report_selected.title"> {{ report_selected.title }} </h4>
							<h4 v-else-if="report_selected.title == null"> ... </h4>
						</template>
						<template v-else-if="report_edit.enable == true">
							<h3>INCIDENT #{{report_selected.id}} (EDIT)</h3>
							<input v-model="report_edit.data.title" type="text" placeholder="Enter report title" v-bind:class="getClass('report-input')" style="font-size: 14px;" required>
						</template>
						<br/>
						<template v-if="report_edit.enable == false">
							<h3>DETAILS</h3>
							<h4 v-if="report_selected.incident" style="white-space: pre-line;">
								{{report_selected.incident}}</h4>
							<h4 v-else-if="report_selected.incident == null"> ... </h4>
						</template>
						<template v-else-if="report_edit.enable == true">
							<h3>DETAILS (EDIT)</h3>
							<form>
								<textarea style="white-space: pre-wrap" v-model="report_edit.data.incident" :class="getClass('textarea')" onfocus='this.style.height = "";this.style.height = this.scrollHeight + "px"'
									onkeypress='this.style.height = "";this.style.height = this.scrollHeight + "px"' placeholder="Enter report description" required></textarea>
							</form>
						</template>
						<br/>
						<h3>CHARGES</h3>
						<h4 v-if="!report_selected.charges && !Object.entries(report_selected.charges.length)"> ... </h4>
						<template v-if="report_edit.enable == true">
							<span v-for="[id, count] in Object.entries(report_selected.charges)" :key="id" >
								<h4>
									<span v-if='report_selected.actioned===0' v-on:click="RemoveExistingCharge(id)" class="remove">(-)</span>
									({{count}}x) {{ offense_finder[id.toString()].label }} 
								</h4>
							</span>
						</template>
						<template v-else-if="report_edit.enable == false">
							<span v-for="[id, count] in Object.entries(report_selected.charges)" :key="id" >
								<h4>
									({{count}}x) {{ offense_finder[id.toString()].label }} 
								</h4>
						</template>
						
						<br/>
						<h3>MAXIMUM FINE</h3>
						<h4>  {{  formatMoney(report_selected.fine) }} </h4>
						<br/>
						<h3>MAXIMUM SENTENCE</h3>
						<h4 v-if="report_selected.duration"> {{ report_selected.duration <= 720 ? report_selected.duration : 720 }} Months </h4>
						<h4 v-else-if="!report_selected.duration"> No sentence recommended.</h4>
						<br/>
						<h3 >MAXIMUM LICENCE POINTS</h3>
						<h4 v-if="!jQuery.isEmptyObject(report_selected.licence_points)" v-for="(points, licence) in report_selected.licence_points">
							{{ all_licences[licence].label }} - {{ points <= 20 ? points : 20 }} points
						</h4>
						<h4 v-else> No recommended licence point actions. </h4>
						<br/>
						<h3>OFFICER</h3>
						<h4 v-if="report_selected.author"> {{ report_selected.author }} </h4>
						<h4 v-else-if="report_selected.author == null"> ... </h4>
						<br>
					</div>

					<div v-if='report_edit.enable==true && !report_selected.actioned'class="right-side" style="position: absolute; top: 15%;">
						
						<div>
							<h3 style="margin: 10px 0px">SEARCH CHARGES</h3>
							<div v-if="offenses" style="max-height: 440px; margin-right: 10px;">
								<input v-model="report_edit.charges_search" type="text" placeholder="Filter charges" style="width: 80%;" required>
								<span v-for="offense in filtered_charges">
									<button type="button" v-on:click="AddExistingCharge(offense)" style="margin-bottom: 10px; width: 100%; padding: unset;">{{ offense.label }}</button>
									<br>
								</span>
							</div>
							<h4 v-else-if="offenses == false">Loading charges...</h4>
						</div>
					</div>
				</div>

				<div v-if="page == 'Warrants'">
					<h2 class="page-title">ACTIVE WARRANTS</h2>
					<input v-model="warrant_search" type="text" placeholder="Filter warrants" required>
					<br>
					<div style="max-width: 1000px; width: 1000px; float: unset; margin: 0 auto; max-height: 450px; overflow-y: scroll;">
						<table v-if="filtered_warrants.length > 0" style="margin: 0 auto;">
							<tr>
								<th>Name</th>
								<th>Report</th>
								<th>Issue Date</th>
								<th style="column-width: 140px;">Expires</th>
							</tr>
							<tr v-for="warrant in filtered_warrants"
								v-on:click="changePage('Warrant Details'); warrant_selected = warrant;">
								<td>{{warrant.name}}</td>
								<td
									style="overflow: hidden; text-overflow: ellipsis; max-width: 500px; max-height: 10px;">
									{{warrant.report_title}}</td>
								<td>{{new Date(warrant.date).toLocaleString('en-GB', {timeZone: 'Europe/London'})}}</td>
								<td style="padding: 5px;">{{warrant.expire_time}}</td>
							</tr>
						</table>
						<h4 v-else-if="filtered_warrants.length == 0"
							style="text-align: center; font-size: 20px; font-weight: bold;"><br>No warrants found!
						</h4>
						<div style="bottom: 0%">
							<button v-if="(officer.department === 'police' && officer.departmentLevel >=1) || (officer.department ==='nca' && officer.departmentLevel>=1)" v-on:click="changePage('Submit Warrant')" type="button"
								style="margin-top: 30px;">NEW WARRANT</button>
						</div>
					</div>
				</div>

				<div v-if="page == 'Police Hours'">
					<h2 class="page-title">PATROL HOURS</h2>
					<form>
						<input v-model="officer_search" type="text" placeholder="Filter Officers" required>
					</form>
					<br>
					<div style="max-width: 1000px; width: 1000px; float: unset; margin: 0 auto; max-height: 450px; overflow-y: scroll;">
						<table v-if="filtered_officers.length > 0" style="margin: 0 auto;">
							<tr>
								<th>Rank</th>
								<th>Name</th>
								<th>Last 30 days</th>
							</tr>
							<tr v-for="officer in filtered_officers">
								<td>{{ findGrade(officer.policelevel) }}</td>
								<td>{{ officer.firstname }} {{ officer.lastname }}</td>
								<td>{{ officer.patrol_hours }} hours</td>
							</tr>
						</table>
						<h4 v-else-if="filtered_officers.length === 0"
							style="text-align: center; font-size: 20px; font-weight: bold;"><br>No officers found!
						</h4>
					</div>
				</div>


				<div v-if="page == 'Search Vehicles'">
					<h2 class="page-title">SEARCH DATABASE</h2>
					<form v-on:submit.prevent = "VehicleSearch()">
						<input v-model="vehicle_search" type="text" placeholder="Full or partial plate" required >
						<button type="submit">SEARCH</button>
					</form>
					<br>
					<div class="left-side">
						<h3>PLATE</h3>
						<h4 v-if="vehicle_selected.plate"> {{vehicle_selected.plate}} </h4>
						<h4 v-else-if="vehicle_selected.plate == null"> ... </h4>
						<br/>
						<h3>TYPE</h3>
						<h4 v-if="vehicle_selected.type"> {{vehicle_selected.type}} </h4>
						<h4 v-else-if="vehicle_selected.type == null"> ... </h4>
						<br/>
						<!-- <h3> MARKERS</h3>
						<span v-if="vehicle_selected.notes" v-for="(value, key) in vehicle_selected.notes" :key='key'>
							<button v-if="value===1" style="margin-right:5px;">{{ key }}</button>
						</span>
						<br/> -->
						<br/>
						<h3>STATUS</h3>
						<h4 v-if="vehicle_selected.haswarrant" style="color: #ff4747">{{vehicle_selected.owner}} has an active warrant.</h4>
						<!-- <h4 v-if="vehicle_selected.bail">{{vehicle_selected.owner}} is on bail.</h4> -->
						<h4 v-if="vehicle_selected.stolen" style="color: #ff4747">This vehicle is flagged as stolen.</h4>
						<h4 v-else-if="vehicle_selected.plate == null"> ... </h4>
						<button v-if="vehicle_selected.plate && !vehicle_selected.stolen" type="button" 
							v-on:click="ToggleVehicleStolen()" 
							style="margin: 15px 0;"> Mark as Stolen
						</button>
						<button v-if="vehicle_selected.plate && vehicle_selected.stolen" type="button" 
							v-on:click="ToggleVehicleStolen()" 
							style="margin: 15px 0;"> Unmark as Stolen
						</button>
						<br v-if="vehicle_selected.haswarrant || vehicle_selected.bail || vehicle_selected.stolen" />
						<h3>OWNER</h3>
						<h4 v-if="vehicle_selected.owner" v-on:click="OpenOffenderDetailsById(vehicle_selected.owner_id)" v-bind:class="getClass('clickable')"> {{vehicle_selected.owner}} </h4>
						<h4 v-else-if="vehicle_selected.owner == null"> ... </h4>
						<br/>
						<h3>MODEL</h3>
						<h4 v-if="vehicle_selected.model"> {{vehicle_selected.model}} </h4>
						<h4 v-else-if="vehicle_selected.model == null"> ... </h4>
						<br/>
						<h3>COLOR</h3>
						<h4 v-if="vehicle_selected.color"> {{vehicle_selected.color}} </h4>
						<h4 v-else-if="vehicle_selected.color == null"> ... </h4>
						<br/>
						<h3>Location</h3>
						<h4 v-if="vehicle_selected.location" > {{vehicle_selected.location}} </h4>
						<h4 v-else-if="vehicle_selected.location == null"> ... </h4>
						<!-- <button v-if="vehicle_selected.plate" type="button" 
							v-on:click="modal = 'edit_vehicle'; edit_vehicle.notes = {...vehicle_selected.notes}; edit_vehicle.stolen = vehicle_selected.stolen;"
							style="margin: 15px 0;">EDIT VEHICLE
						</button> -->
					</div>


					<div class="right-side" style="max-height: 435px">
						<div v-if="vehicle_results.results">
							<h3>SEARCH RESULTS</h3>
							<h4 style="margin: 10px 1px 30px 1px;">Finding results for '{{ vehicle_results.query }}'...
							</h4>
							<span v-if="vehicle_results.results" v-for="result in vehicle_results.results">
								<button type="button" v-on:click="OpenVehicleDetails(result)" style="margin-bottom: 10px; width: 100%; padding: unset;"> {{ result.plate }} </button>
								<br>
							</span>
						</div>
					</div>

					<!-- <div class="modal" v-if="modal == 'edit_vehicle'">
						<div v-bind:class="getClass('modal-content')"
							style="width: 50%; padding: 15px; margin-top: 120px; text-align: left;">
							<span v-bind:class="getClass('close')" v-on:click="modal = null"><i class="fas fa-times"></i></span>
							<h3 style="text-align: left; margin: 0; padding: 0; margin-bottom: 15px;">EDIT VEHICLE</h3>
							<div style="margin-right: 5px; max-height: 65%; overflow-y: auto;">
								<h3>Markers</h3>
								<br/>
								<span v-if="edit_vehicle.notes" v-for="(value, key) in edit_vehicle.notes" :key='key'>
									<button v-if="value===1" class="clickable" 
									v-on:click="Vue.set(edit_vehicle.notes, key, 0)" style='
									background-color: #43b581;
									color: #23272a;
									font-family: "Lato";
									font-weight: bolder;
									border: 4px solid #43b581;
									font-size: 12pt;
									text-align: center;
									padding: 4px 3px;
									margin-right: 5px;
								'>{{ key }} </button>
									<button v-else class="clickable" 
									v-on:click="Vue.set(edit_vehicle.notes, key, 1)" style='
										background-color: #ff4747;
										color: #fff;
										font-family: "Lato";
										font-weight: bolder;
										border: 4px solid #ff4747;
										font-size: 12pt;
										text-align: center;
										padding: 4px 3px;
										margin-right: 5px;
									'
									>{{ key }} </button>
								</span>
								<button v-if="edit_vehicle.stolen == true" type="button" style='margin: 10px 0;
								background-color: #43b581;
										color: #23272a;
										font-family: "Lato";
										font-weight: bolder;
										border: 4px solid #43b581;
										font-size: 12pt;
										text-align: center;
										padding: 4px 3px;
										margin-right: 5px;'
									v-on:click="edit_vehicle.stolen = false">Stolen</button>

								<button v-else-if="edit_vehicle.stolen == false" type="button" style='margin: 10px 0;
										background-color: #ff4747;
										color: #fff;
										font-family: "Lato";
										font-weight: bolder;
										border: 4px solid #ff4747;
										font-size: 12pt;
										text-align: center;
										padding: 4px 3px;
										margin-right: 5px;'
									v-on:click="edit_vehicle.stolen = true">Not Stolen</button>
								<br>
								<button type="button" v-if="JSON.stringify(edit_vehicle.notes) !== JSON.stringify(vehicle_selected.notes) || edit_vehicle.stolen != vehicle_selected.stolen"
									v-on:click="SaveVehicleEditChanges()">SAVE</button>
							</div>
						</div>
					</div> -->
				</div>

				<div v-if="page == 'Submit Warrant'">
					<h2 class="page-title">NEW WARRANT</h2>
					<div class="left-side" style="position: absolute; float: none; top: 15%; ">
						<form v-on:submit.prevent = "SubmitNewWarrant()">
							<h3>REPORT</h3>
							<h4 v-if="warrant_new.report_title" style="font-size: 14px;"> {{ warrant_new.report_title }} </h4>
							<h4 v-else-if="warrant_new.report_title == null"> ... </h4>
							<br/>
							<h3>NAME</h3>
							<h4 v-if="warrant_new.name" style="font-size: 14px;"> {{ warrant_new.name }} </h4>
							<h4 v-else-if="warrant_new.name == null"> ... </h4>
							<br/>
							<h3>NOTES</h3>
							<input v-model="warrant_new.notes" style="font-size: 14px; width: 400px;" type="text" placeholder="Enter warrant notes" class="report-input" required>
							<br/>
							<br/>
							<h3>CHARGES</h3>
							<h4 v-if="!Object.entries(warrant_new.charges).length"> ... </h4>
							<span v-else v-for="[id, count] in Object.entries(warrant_new.charges)" :key="id">
								<h4 style="font-size: 14px;">
									({{ count }}x) {{ offense_finder[id.toString()].label }} 
								</h4>
							</span>
							<br/>
							<h3>MAXIMUM FINE</h3>
							<h4>  {{  formatMoney(warrant_new.fine) }} </h4>
							<br/>
							<h3>MAXIMUM SENTENCE</h3>
							<h4 v-if="warrant_new.duration"> {{ warrant_new.duration <= 720 ? warrant_new.duration : 720 }} Months </h4>
							<h4 v-else-if="!warrant_new.duration"> No sentence recommended.</h4>
							<br/>
							<button v-if="warrant_new.report_id && warrant_new.char_id" type="submit" style="margin-top: 20px">SUBMIT WARRANT</button>
						</form>
					</div>

					<div class="right-side" style="max-height: 510px;">
						<h3 v-if="report_results.results">SEARCH RESULTS</h3>
						<h3 v-else-if="report_results.query == ''">SEARCH REPORTS</h3>
						<br>
						<form v-on:submit.prevent = "WarrantReportSearch()">
							<input v-model="warrant_new.report_search" type="text" placeholder="Name or Incident ID" required>
							<button type="submit">SEARCH</button>
						</form>
						<div v-if="report_results.results" style="margin-right: 10px;">
							<h4 style="margin: 10px 1px 30px 1px;">Finding results for '{{ warrant_new.report_search }}'...</h4>
							<span v-if="report_results.results" v-for="result in report_results.results">
								<h4 style="font-size: 12px; margin-bottom: 3px;"> {{ new Date(result.date).toLocaleString('en-GB', {timeZone: 'Europe/London'}) }} - ID: {{ result.id }} - {{ result.name }}</h4>
								<button type="button" v-on:click="warrant_new.report_title = result.title; warrant_new.name = result.name; warrant_new.charges = result.charges; warrant_new.report_id = result.id; warrant_new.char_id = result.char_id; warrant_new.fine = result.fine; warrant_new.duration = result.duration;"
									style="margin-bottom: 10px; width: 100%; padding: unset;"> {{ result.title }} </button>
								<br>
							</span>
						</div>
					</div>
				</div>

				<div v-if="page == 'Warrant Details'">
					<h2 class="page-title">WARRANT DETAILS</h2>
					<br>
					<div class="left-side" style="max-width: 1000px; float: unset; margin: 0 auto;">
						<h3>DATE</h3>
						<h4 v-if="warrant_selected.date"> {{ new Date(warrant_selected.date).toLocaleString('en-GB', {timeZone: 'Europe/London'}) }} </h4>
						<h4 v-else-if="warrant_selected.date == null"> ... </h4>
						<br/>
						<h3>NAME</h3>
						<h4 v-if="warrant_selected.name" v-on:click="OpenOffenderDetailsById(warrant_selected.char_id)" v-bind:class="getClass('clickable')"> {{ warrant_selected.name }} </h4>
						<h4 v-else-if="warrant_selected.name == null"> ... </h4>
						<br/>
						<h3>REPORT</h3>
						<h4 v-if="warrant_selected.report_title" v-on:click="OpenReportById(warrant_selected.report_id)"
							v-bind:class="getClass('clickable')"> {{ warrant_selected.report_title }} </h4>
						<h4 v-else-if="warrant_selected.report_title == null"> ... </h4>
						<br/>
						<h3>NOTES</h3>
						<h4 v-if="warrant_selected.notes"> {{ warrant_selected.notes }} </h4>
						<h4 v-else-if="warrant_selected.notes == null"> ... </h4>
						<br/>
						<h3>CHARGES</h3>
						<span v-for="[id, count] in Object.entries(warrant_selected.charges)" :key="id">
							<h4>
								({{ count }}x) {{ offense_finder[id.toString()].label }} 
							</h4>
						</span>
						<br/>
						<h3>MAXIMUM FINE</h3>
						<h4>  {{ formatMoney(warrant_selected.fine) }} </h4>
						<br/>
						<h3>MAXIMUM SENTENCE</h3>
						<h4 v-if="warrant_selected.duration"> {{ warrant_selected.duration <= 720 ? warrant_selected.duration : 720 }} Months </h4>
						<h4 v-else-if="!warrant_selected.duration"> No sentence recommended.</h4>
						<br/>
						<h3>AUTHOR</h3>
						<h4 v-if="warrant_selected.author"> {{ warrant_selected.author }} </h4>
						<h4 v-else-if="warrant_selected.author == null"> ... </h4>
						<br/>
						<h3>EXPIRES</h3>
						<h4 v-if="warrant_selected.expire_time"> {{ warrant_selected.expire_time }} </h4>
						<h4 v-else-if="warrant_selected.expire_time == null"> ... </h4>
						<br>
						<h4 v-if="warrant_selected.actioned"> Warrant has been actioned</h4>
						<br v-if="warrant_selected.actioned">
						<button type="button" v-on:click="changePage('Warrants');" id="warrants">BACK TO WARRANTS</button>
						<button v-if="((officer.department === 'police' && officer.departmentLevel >=1) || (officer.department ==='nca' && officer.departmentLevel>=1)) && !warrant_selected.actioned"  type="button" v-on:click="ActionReport(warrant_selected.report_id, warrant_selected.charges, warrant_selected.char_id); ActionWarrant(warrant_selected.id)" id="warrants">MARK AS ACTIONED</button>
						<button v-if="(officer.department === 'police' && officer.departmentLevel >=4) || (officer.department ==='nca' && officer.departmentLevel>=4)" type="button" v-on:click="DeleteSelectedWarrant()">DELETE</button>
					</div>
				</div>

				<!-- <div v-if="page == 'Calls'">
					<h2 class="page-title">CALL MONITOR</h2>
					<h4 v-if="Object.keys(calls).length == 0" style="text-align: center; font-size: 20px; font-weight: bold; margin-top: 20px;">No incoming calls.</h4>
					<div style="margin: 0 auto; width: 100%; max-height: 90%; overflow-y: auto; margin-top: 20px;" v-if="Object.keys(calls).length > 0">
						<table style="margin: 0 auto; width: 95%;">
							<tr>
								<th>#</th>
								<th>Caller</th>
								<th>Details</th>
								<th>Date</th>
								<th>Location</th>
								<th>No. Attached</th>
								<th>Actions</th>
							</tr>
							<tr v-for="(call, index) in calls" :key="index">
								<td>{{index}}</td>
								<td>{{call.source}}</td>
								<td class="ellipsis"><span>{{call.details}}</span></td>
								<td>{{call.time}}</td>
								<td>{{call.location}}</td>
								<td>{{attached(index)}}</td>
								<td>
									<i style="font-size: 1.5em;" class="fas fa-link" v-bind:class="getClass('clickable2')" v-if="current_call.id == null" v-on:click="AttachToCall(index)"></i>
									<i style="font-size: 1.5em;" class="fas fa-unlink" v-bind:class="getClass('clickable2')" v-if="current_call.id == call.id" v-on:click="DetachFromCall(index)"></i>
									<i style="font-size: 1.5em;" class="fas fa-map-marker-alt" v-bind:class="getClass('clickable2')" v-on:click="SetCallWaypoint(index)"></i>
									<i style="font-size: 1.5em;" class="fas fa-info-circle" v-bind:class="getClass('clickable2')" v-on:click="ShowCallDetails(index)"></i>
									<i style="font-size: 1.5em;" class="fas fa-edit" v-bind:class="getClass('clickable2')" v-if="current_call.id == call.id" v-on:click="EditCall(index)"></i>
									<i style="font-size: 1.5em;" class="fas fa-trash" v-bind:class="getClass('clickable2')" v-if="current_call.id == call.id" v-on:click="DeleteCall(index)"></i>
								</td>
							</tr>
						</table>
					</div>

					<div class="modal" v-if="modal == 'call_details'">
						<div v-bind:class="getClass('modal-content')" style="width: 50%; padding: 15px; margin-top: 120px; text-align: left;">
							<span v-bind:class="getClass('close')" v-on:click="modal = null"><i class="fas fa-times"></i></span>
							<h3 style="text-align: left; margin: 0; padding: 0; margin-bottom: 15px;">CALL DETAILS</h3>
							<div style="margin-right: 5px;max-height: 65%; overflow-y: auto;">
								<p style="font-style: italic;">This call was made at {{calls[selected_call].time}}.</p>
								<p style="font-weight: bold; margin-bottom: 0;">\\Date >></p>
								<p style="margin-top: 0;">{{calls[selected_call].time}}</p>
								<p style="font-weight: bold; margin-bottom: 0;">\\Details >></p>
								<p style="margin-top: 0;">{{calls[selected_call].details}}</p>
								<p style="font-weight: bold; margin-bottom: 0;">\\Location >></p>
								<p style="margin-top: 0;">{{calls[selected_call].location}}</p>
								<p style="font-weight: bold; margin-bottom: 0;">\\Attached >></p>
								<p style="margin-top: 0;" v-for="officer in calls[selected_call].officers">{{officer}}</p>
								<p style="font-style: italic; margin-top: 0;" v-if="calls[selected_call].officers.length == 0">None</p>
							</div>
						</div>
					</div>

					<div class="modal" v-if="modal == 'edit_call'">
						<div v-bind:class="getClass('modal-content')" style="width: 50%; padding: 15px; margin-top: 120px; text-align: left;">
							<span v-bind:class="getClass('close')" v-on:click="modal = null"><i class="fas fa-times"></i></span>
							<h3 style="text-align: left; margin: 0; padding: 0; margin-bottom: 15px;">CALL DETAILS</h3>
							<div style="margin-right: 5px; max-height: 65%; overflow-y: auto;">
								<textarea v-model="edit_call.details" :class="getClass('textarea')" rows="6" cols="55" placeholder="Enter report description"
									onkeypress='this.style.height = "";this.style.height = this.scrollHeight + "px"' required>
								</textarea>
								<br>
								<button type="button" v-if="edit_call != current_call.details"
									v-on:click="SaveEditCall()">SAVE</button>
							</div>
						</div>
					</div>
				</div> -->

				<div class="modal" v-if="modal == 'loading'">
					<div v-bind:class="getClass('modal-content')" style="width: 10%; height: auto; margin: 20% auto;">
						<p>Loading<span id="wait">.</span></p>
					</div>
				</div>

				<div id="notification" v-bind:class="getClass('notification')">
					<h4>{{notify}}</h4>
				</div>
				
			</main>

			<p v-if="officer.department == 'police'"
				style="color: #1b67c5; font-family: 'Georgia'; font-style: italic; font-size: 20pt; position: fixed; bottom: 1%; right: 5.5%; direction: rtl;">Keeping Los Santos Safe</p>
			<div v-bind:class="getClass('line')" style="bottom: 10%"></div>
			<p v-if="officer.department == 'nca'"
			style="color: #ffffff; font-family: 'Georgia'; font-style: italic; font-size: 20pt; position: fixed; bottom: 1%; right: 5.5%; direction: rtl;">Exitus Acta Probat</p>
			<div v-bind:class="getClass('line')" style="bottom: 10%"></div>
		</div>
	</div>

</body>

<footer>

	<script src="vue.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"> </script>
	<script src="script.js"></script>
	<script>
		var dots = window.setInterval(function () {
			if (mdtApp.modal == 'loading') {
				var wait = document.getElementById("wait");
				if (wait.innerHTML.length >= 3)
					wait.innerHTML = "";
				else
					wait.innerHTML += ".";
			}
		}, 200);
	</script>

</footer>

</html>
